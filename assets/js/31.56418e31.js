(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{774:function(a,s,t){"use strict";t.r(s);var n=t(109),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"mirai-console-run"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mirai-console-run"}},[a._v("#")]),a._v(" Mirai Console - Run")]),a._v(" "),t("p",[a._v("Mirai Console 可以独立启动，也可以被嵌入到某个应用中。")]),a._v(" "),t("h2",{attrs:{id:"使用工具自动独立启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用工具自动独立启动"}},[a._v("#")]),a._v(" 使用工具自动独立启动")]),a._v(" "),t("p",[a._v("该部分文档已经转移到 "),t("RouterLink",{attrs:{to:"/UserManual.html"}},[a._v("用户手册")]),a._v("。")],1),a._v(" "),t("h2",{attrs:{id:"嵌入应用启动-实验性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#嵌入应用启动-实验性"}},[a._v("#")]),a._v(" 嵌入应用启动（实验性）")]),a._v(" "),t("p",[a._v("将 Mirai Console 作为一个依赖嵌入一个 JVM 应用启动，开发者主动加载插件。尤其适合在开发时启动真实环境的测试。")]),a._v(" "),t("h3",{attrs:{id:"环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境"}},[a._v("#")]),a._v(" 环境")]),a._v(" "),t("ul",[t("li",[a._v("JDK 1.8+ / Android SDK 26+ (Android 8+)")]),a._v(" "),t("li",[a._v("Kotlin 1.4+")])]),a._v(" "),t("h3",{attrs:{id:"添加依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#添加依赖"}},[a._v("#")]),a._v(" 添加依赖")]),a._v(" "),t("p",[t("RouterLink",{attrs:{to:"/console/ConfiguringProjects.html#选择版本"}},[a._v("选择版本")])],1),a._v(" "),t("p",[t("code",[a._v("build.gradle.kts")]),a._v(":")]),a._v(" "),t("div",{staticClass:"language-kotlin line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-kotlin"}},[t("code",[a._v("dependencies "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("api")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"net.mamoe:mirai-console-terminal:2.0.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 自行替换版本")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("api")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"net.mamoe:mirai-core:2.0.0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("h3",{attrs:{id:"启动-terminal-前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-terminal-前端"}},[a._v("#")]),a._v(" 启动 Terminal 前端")]),a._v(" "),t("p",[a._v("一行启动：")]),a._v(" "),t("div",{staticClass:"language-kotlin line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-kotlin"}},[t("code",[a._v("MiraiConsoleTerminalLoader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("startAsDaemon")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("注意, Mirai Console 将会以 '守护进程' 形式启动，不会阻止主线程退出。")]),a._v(" "),t("h3",{attrs:{id:"从内存加载-jvm-插件-实验性"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从内存加载-jvm-插件-实验性"}},[a._v("#")]),a._v(" 从内存加载 JVM 插件（实验性）")]),a._v(" "),t("p",[a._v("在嵌入使用时，插件可以直接加载：")]),a._v(" "),t("div",{staticClass:"language-kotlin line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-kotlin"}},[t("code",[a._v("MiraiConsoleTerminalLoader"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("startAsDaemon")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 先启动 Mirai Console")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Kotlin")]),a._v("\nPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("load")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 扩展函数")]),a._v("\nPlugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("enable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 扩展函数 ")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// Java")]),a._v("\nPluginManager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("INSTANCE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("loadPlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Plugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("INSTANCE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nPluginManager"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("INSTANCE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("enablePlugin")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Plugin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("INSTANCE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br")])]),t("p",[a._v("但注意：这种方法目前是实验性的——一些特定的功能如注册扩展可能不会正常工作。")]),a._v(" "),t("h2",{attrs:{id:"手动配置独立启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#手动配置独立启动"}},[a._v("#")]),a._v(" 手动配置独立启动")]),a._v(" "),t("p",[a._v("强烈建议使用自动启动工具，若无法使用，可以参考如下手动启动方式。")]),a._v(" "),t("h3",{attrs:{id:"环境-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境-2"}},[a._v("#")]),a._v(" 环境")]),a._v(" "),t("ul",[t("li",[a._v("JRE 8+ / JDK 8+")])]),a._v(" "),t("h3",{attrs:{id:"准备文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#准备文件"}},[a._v("#")]),a._v(" 准备文件")]),a._v(" "),t("p",[a._v("要启动 Mirai Console，你需要：")]),a._v(" "),t("ul",[t("li",[a._v("mirai-core")]),a._v(" "),t("li",[a._v("mirai-console 后端")]),a._v(" "),t("li",[a._v("mirai-console 任一前端")]),a._v(" "),t("li",[a._v("相关依赖")])]),a._v(" "),t("p",[a._v("只有 mirai-console 前端才有入口点 "),t("code",[a._v("main")]),a._v(" 方法。目前只有一个 terminal 前端可用。")]),a._v(" "),t("h4",{attrs:{id:"从-jcenter-下载模块"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从-jcenter-下载模块"}},[a._v("#")]),a._v(" 从 JCenter 下载模块")]),a._v(" "),t("p",[a._v("mirai 在版本发布时会将发布的构建存放于 "),t("a",{attrs:{href:"https://bintray.com/him188moe/mirai",target:"_blank",rel:"noopener noreferrer"}},[a._v("mirai-bintray-repo"),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("ul",[t("li",[a._v("mirai-core 会提供 "),t("a",{attrs:{href:"https://bintray.com/him188moe/mirai/mirai-core-all",target:"_blank",rel:"noopener noreferrer"}},[a._v("mirai-core-all"),t("OutboundLink")],1)]),a._v(" "),t("li",[a._v("mirai-console 与其各个模块都会提供 "),t("code",[a._v("-all")]),a._v(" 的 Shadowed 构建")])]),a._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 注: 自行更换对应版本号")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Download mirai-core-all")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -L https://maven.aliyun.com/repository/public/net/mamoe/mirai-core-all/1.3.3/mirai-core-all-1.3.3-all.jar -o mirai-core-all-1.3.3.jar\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Download mirai-console")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -L https://maven.aliyun.com/repository/public/net/mamoe/mirai-console/1.0.0/mirai-console-1.0.0-all.jar -o mirai-console-1.0.0.jar\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Download mirai-console-terminal")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -L https://maven.aliyun.com/repository/public/net/mamoe/mirai-console-terminal/1.0.0/mirai-console-terminal-1.0.0-all.jar -o mirai-console-terminal-1.0.0.jar\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br")])]),t("h3",{attrs:{id:"启动-mirai-console-terminal-前端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动-mirai-console-terminal-前端"}},[a._v("#")]),a._v(" 启动 mirai-console-terminal 前端")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("下载如下三个模块的最新版本文件并放到一个文件夹内 (如 "),t("code",[a._v("libs")]),a._v(")(详见 "),t("a",{attrs:{href:"#%E4%BB%8E-jcenter-%E4%B8%8B%E8%BD%BD%E6%A8%A1%E5%9D%97"}},[a._v("下载模块")]),a._v(")：")]),a._v(" "),t("ul",[t("li",[a._v("mirai-core-all")]),a._v(" "),t("li",[a._v("mirai-console")]),a._v(" "),t("li",[a._v("mirai-console-terminal")])])]),a._v(" "),t("li",[t("p",[a._v("创建一个新的文件, 名为 "),t("code",[a._v("start-mirai-console.bat")]),a._v("/"),t("code",[a._v("start-mirai-console.ps1")]),a._v("/"),t("code",[a._v("start-mirai-console.sh")])])])]),a._v(" "),t("p",[a._v("Windows CMD:")]),a._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("@echo off\ntitle Mirai Console\njava -cp "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./libs/*"')]),a._v(" net.mamoe.mirai.console.terminal.MiraiConsoleTerminalLoader %*\npause\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("Windows PowerShell:")]),a._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$Host")]),a._v(".UI.RawUI.WindowTitle "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Mirai Console"')]),a._v("\njava -cp "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./libs/*"')]),a._v(" net.mamoe.mirai.console.terminal.MiraiConsoleTerminalLoader "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$args")]),a._v("\npause\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("Linux:")]),a._v(" "),t("div",{staticClass:"language-shell script line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[a._v("#!/usr/bin/env bash")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" -e "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'"),t("span",{pre:!0,attrs:{class:"token entity",title:"\\033"}},[a._v("\\033")]),a._v("]2;Mirai Console"),t("span",{pre:!0,attrs:{class:"token entity",title:"\\007"}},[a._v("\\007")]),a._v("'")]),a._v("\njava -cp "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./libs/*"')]),a._v(" net.mamoe.mirai.console.terminal.MiraiConsoleTerminalLoader "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$*")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("p",[a._v("然后就可以开始使用 mirai-console 了。")]),a._v(" "),t("h4",{attrs:{id:"mirai-console-terminal-前端参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mirai-console-terminal-前端参数"}},[a._v("#")]),a._v(" mirai-console-terminal 前端参数")]),a._v(" "),t("p",[a._v("使用 "),t("code",[a._v("./start-mirai-console --help")]),a._v(" 查看 mirai-console-terminal 支持的启动参数。")])])}),[],!1,null,null,null);s.default=e.exports}}]);