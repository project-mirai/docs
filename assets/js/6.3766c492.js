(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{737:function(a,t){a.exports="data:image/png;base64,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"},738:function(a,t){a.exports="data:image/png;base64,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"},764:function(a,t,s){"use strict";s.r(t);var n=s(109),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,n=a._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"mirai-console-backend-plugins"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mirai-console-backend-plugins"}},[a._v("#")]),a._v(" Mirai Console Backend - Plugins")]),a._v(" "),n("p",[a._v("Mirai Console 运行在 "),n("a",{attrs:{href:"https://zh.wikipedia.org/zh-cn/Java%E8%99%9A%E6%8B%9F%E6%9C%BA",target:"_blank",rel:"noopener noreferrer"}},[a._v("JVM"),n("OutboundLink")],1),a._v("，支持使用 "),n("a",{attrs:{href:"https://www.kotlincn.net/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Kotlin"),n("OutboundLink")],1),a._v(" 或 "),n("a",{attrs:{href:"https://www.java.com/zh_CN/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Java"),n("OutboundLink")],1),a._v(" 语言编写的插件。")]),a._v(" "),n("h2",{attrs:{id:"通用的插件接口-plugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通用的插件接口-plugin"}},[a._v("#")]),a._v(" 通用的插件接口 - "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("Plugin")]),n("OutboundLink")],1)]),a._v(" "),n("p",[a._v("所有 Console 插件都必须实现 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("Plugin")]),n("OutboundLink")],1),a._v(" 接口。")]),a._v(" "),n("blockquote",[n("p",[n("strong",[a._v("解释 "),n("em",[a._v("插件")])]),a._v("：只要实现了 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("Plugin")]),n("OutboundLink")],1),a._v(" 接口的类和对象都可以叫做「Mirai Console 插件」，简称 「插件」。"),n("br"),a._v("\n为了便捷，内含 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("Plugin")]),n("OutboundLink")],1),a._v(" 实现的一个 "),n("a",{attrs:{href:"https://zh.wikipedia.org/zh-cn/JAR_(%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F)",target:"_blank",rel:"noopener noreferrer"}},[a._v("JAR"),n("OutboundLink")],1),a._v(" 文件也可以被称为「插件」。")])]),a._v(" "),n("p",[a._v("基础的 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("Plugin")]),n("OutboundLink")],1),a._v(" 很通用，它只拥有很少的成员：")]),a._v(" "),n("div",{staticClass:"language-kotlin line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("interface")]),a._v(" Plugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" CommandOwner "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// CommandOwner 是空的 interface")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("val")]),a._v(" isEnabled"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" Boolean\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("val")]),a._v(" loader"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" PluginLoader"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 能处理这个 Plugin 的 PluginLoader")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("p",[n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("Plugin")]),n("OutboundLink")],1),a._v(" 接口拥有强扩展性，以支持 Mirai Console 统一管理使用其他编程语言编写的插件 （详见进阶章节 "),n("RouterLink",{attrs:{to:"/console/Extensions.html"}},[a._v("扩展 - PluginLoader")]),a._v("）。")],1),a._v(" "),n("h2",{attrs:{id:"插件加载器-pluginloader"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件加载器-pluginloader"}},[a._v("#")]),a._v(" 插件加载器 - "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/loader/PluginLoader.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("PluginLoader")]),n("OutboundLink")],1)]),a._v(" "),n("p",[a._v("Mirai Console 使用不同的插件加载器来加载不同类型插件。")]),a._v(" "),n("p",[a._v("Mirai Console 内置 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPluginLoader.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPluginLoader")]),n("OutboundLink")],1),a._v(" 以加载 JVM 平台插件（见下文），并允许这些插件注册扩展的插件加载器（见章节 "),n("RouterLink",{attrs:{to:"/console/Extensions.html"}},[a._v("扩展")]),a._v(")")],1),a._v(" "),n("h2",{attrs:{id:"jvm-平台插件接口-jvmplugin"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jvm-平台插件接口-jvmplugin"}},[a._v("#")]),a._v(" JVM 平台插件接口 - "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPlugin")]),n("OutboundLink")],1)]),a._v(" "),n("p",[a._v("所有的 JVM 插件（特别地，"),n("code",[a._v("jar")]),a._v(" 插件）都必须实现 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPlugin")]),n("OutboundLink")],1),a._v("（否则不会被 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPluginLoader.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPluginLoader")]),n("OutboundLink")],1),a._v(" 加载）。"),n("br"),a._v("\nMirai Console 提供一些基础的实现，即 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/AbstractJvmPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("AbstractJvmPlugin")]),n("OutboundLink")],1),a._v("，并将 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPlugin")]),n("OutboundLink")],1),a._v(" 分为 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/KotlinPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("KotlinPlugin")]),n("OutboundLink")],1),a._v(" 和 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JavaPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JavaPlugin")]),n("OutboundLink")],1),a._v("。")]),a._v(" "),n("h3",{attrs:{id:"主类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#主类"}},[a._v("#")]),a._v(" 主类")]),a._v(" "),n("p",[a._v("JVM 平台插件的主类应被实现为一个单例（Kotlin "),n("code",[a._v("object")]),a._v("，Java 静态初始化的类，详见下文示例）。")]),a._v(" "),n("p",[n("strong",[a._v("Kotlin 使用者的插件主类应继承 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/KotlinPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("KotlinPlugin")]),n("OutboundLink")],1),a._v("。")]),n("br"),a._v(" "),n("strong",[a._v("其他 JVM 语言（如 Java）使用者的插件主类应继承 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JavaPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JavaPlugin")]),n("OutboundLink")],1),a._v("。")])]),a._v(" "),n("h4",{attrs:{id:"定义主类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#定义主类"}},[a._v("#")]),a._v(" 定义主类")]),a._v(" "),n("p",[a._v("Mirai Console 使用类似 Java "),n("code",[a._v("ServiceLoader")]),a._v(" 但更灵活的机制加载插件。")]),a._v(" "),n("p",[a._v("一个正确的主类定义可以是以下三种任一：")]),a._v(" "),n("ol",[n("li",[a._v("Kotlin ("),n("code",[a._v("public")]),a._v(") "),n("code",[a._v("object")])])]),a._v(" "),n("div",{staticClass:"language-kotlin line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("object")]),a._v(" A "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("KotlinPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/* 描述 */")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[a._v("Java ("),n("code",[a._v("public")]),a._v(") 静态初始化单例 "),n("code",[a._v("class")])])]),a._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("A")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JavaPlugin")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("A")]),a._v(" INSTANCE "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("A")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 必须 public static, 必须名为 INSTANCE")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("A")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/* 描述 */")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[a._v("Java ("),n("code",[a._v("public")]),a._v(") "),n("code",[a._v("class")]),n("br"),a._v("\n注意：这种由 Mirai Console 构造插件实例的方法是不推荐的。请首选上述静态初始化方法。")])]),a._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("A")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JavaPlugin")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("A")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 必须公开且无参")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("/* 描述 */")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("h4",{attrs:{id:"确认主类正确定义"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#确认主类正确定义"}},[a._v("#")]),a._v(" 确认主类正确定义")]),a._v(" "),n("p",[a._v("在 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/tools/intellij-plugin/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Mirai Console IntelliJ 插件"),n("OutboundLink")],1),a._v(" 的帮助下，一个正确的插件主类定义的行号处会显示 Mirai 像素风格形象图："),n("img",{attrs:{src:"https://github.com/mamoe/mirai-console/tree/master/tools/intellij-plugin/resources/icons/pluginMainDeclaration.png",alt:"MiraiPixel"}})]),a._v(" "),n("p",[n("img",{attrs:{src:s(737),alt:"PluginMainDeclaration"}})]),a._v(" "),n("h4",{attrs:{id:"配置主类服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置主类服务"}},[a._v("#")]),a._v(" 配置主类服务")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/tools/intellij-plugin/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Mirai Console IntelliJ 插件"),n("OutboundLink")],1),a._v(" 会自动检查主类服务的配置。在没有正确配置时，IDE 将会警告并为你自动配置："),n("br"),a._v(" "),n("img",{attrs:{src:s(738),alt:"PluginMainServiceNotConfigured"}})]),a._v(" "),n("h5",{attrs:{id:"手动配置主类服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手动配置主类服务"}},[a._v("#")]),a._v(" 手动配置主类服务")]),a._v(" "),n("p",[a._v("若无法使用 IntelliJ 插件，可在资源目录 "),n("code",[a._v("META-INF/services/net.mamoe.mirai.console.plugin.jvm.JvmPlugin")]),a._v(" 文件内存放插件主类全名（以纯文本 UTF-8 存储，文件内容只包含一行插件主类全名）。")]),a._v(" "),n("p",[a._v("在 Kotlin，也可（"),n("RouterLink",{attrs:{to:"/console/QA.html#使用-autoservice"}},[a._v("使用 AutoService")]),a._v("）自动配置 service 信息。")],1),a._v(" "),n("h3",{attrs:{id:"描述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#描述"}},[a._v("#")]),a._v(" 描述")]),a._v(" "),n("p",[a._v("插件描述需要在主类构造器传递给 "),n("code",[a._v("super")]),a._v("。可以选择直接提供或从 JAR 资源文件读取。")]),a._v(" "),n("p",[a._v("有关插件版本号的限制：")]),a._v(" "),n("ul",[n("li",[a._v("插件自身的版本要求遵循 "),n("a",{attrs:{href:"https://semver.org/lang/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[a._v("语义化版本 2.0.0"),n("OutboundLink")],1),a._v(" 规范, 合格的版本例如: "),n("code",[a._v("1.0.0")]),a._v(", "),n("code",[a._v("1.0")]),a._v(", "),n("code",[a._v("1.0-M1")]),a._v(", "),n("code",[a._v("1.0-pre-1")])]),a._v(" "),n("li",[a._v("插件依赖的版本遵循 "),n("a",{attrs:{href:"https://semver.org/lang/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[a._v("语义化版本 2.0.0"),n("OutboundLink")],1),a._v(" 规范, 同时支持 "),n("a",{attrs:{href:"http://ant.apache.org/ivy/history/latest-milestone/settings/version-matchers.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Apache Ivy 风格表示方法"),n("OutboundLink")],1),a._v(".")])]),a._v(" "),n("p",[a._v("有关描述的详细信息可在开发时查看源码内文档。")]),a._v(" "),n("h3",{attrs:{id:"主类的完整示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#主类的完整示例"}},[a._v("#")]),a._v(" 主类的完整示例")]),a._v(" "),n("p",[a._v("基于上文，你现在有以下三种主类定义方式。")]),a._v(" "),n("h4",{attrs:{id:"实现-kotlin-插件主类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现-kotlin-插件主类"}},[a._v("#")]),a._v(" 实现 Kotlin 插件主类")]),a._v(" "),n("p",[a._v("一个 Kotlin 插件的主类通常需:")]),a._v(" "),n("ul",[n("li",[a._v("继承 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/KotlinPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("KotlinPlugin")]),n("OutboundLink")],1)]),a._v(" "),n("li",[a._v("访问权限为 "),n("code",[a._v("public")]),a._v(" 或默认 (不指定)")])]),a._v(" "),n("div",{staticClass:"language-kotlin line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("object")]),a._v(" SchedulePlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("KotlinPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("JvmPluginDescription")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n        id "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.example.my-schedule-plugin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        version "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Schedule"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v('// author("...")')]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v('// dependsOn("...")')]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br")])]),n("h4",{attrs:{id:"实现-java-插件主类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现-java-插件主类"}},[a._v("#")]),a._v(" 实现 Java 插件主类")]),a._v(" "),n("p",[a._v("一个 Java 插件的主类通常需:")]),a._v(" "),n("ul",[n("li",[a._v("继承 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JavaPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JavaPlugin")]),n("OutboundLink")],1)]),a._v(" "),n("li",[a._v("访问权限为 "),n("code",[a._v("public")])])]),a._v(" "),n("p",[a._v("(推荐) 静态初始化:")]),a._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JExample")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JavaPlugin")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JExample")]),a._v(" INSTANCE "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JExample")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 可以像 Kotlin 一样静态初始化单例")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JExample")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JvmPluginDescriptionBuilder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.example.test-plugin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// name")]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.0.0"')]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// version")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v('// .author("...")')]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v('// .info("...")')]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br")])]),n("p",[a._v("由 Console 初始化（仅在某些静态初始化不可用的情况下使用）:")]),a._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("final")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JExample")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JavaPlugin")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("private")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JExample")]),a._v(" instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("static")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JExample")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("getInstance")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" instance"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("public")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JExample")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 此时必须 public")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("super")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[a._v("JvmPluginDescriptionBuilder")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.example.test-plugin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// id")]),a._v("\n            "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.0.0"')]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// version")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v('// .author("...")')]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v('// .info("...")')]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("build")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        instance "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("this")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br")])]),n("h3",{attrs:{id:"依赖管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#依赖管理"}},[a._v("#")]),a._v(" 依赖管理")]),a._v(" "),n("p",[a._v("一个插件被允许依赖于另一个插件。可在 "),n("code",[a._v("SimpleJvmPluginDescription")]),a._v(" 构造时提供信息。")]),a._v(" "),n("p",[a._v("若插件拥有依赖，则会首先加载其依赖。但任何一个插件的 "),n("code",[a._v("onEnable()")]),a._v(" 都会在所有插件的 "),n("code",[a._v("onLoad()")]),a._v(" 都调用成功后再调用。")]),a._v(" "),n("p",[a._v("多个插件的加载是"),n("em",[a._v("顺序的")]),a._v("，意味着若一个插件的 "),n("code",[a._v("onLoad()")]),a._v(" 等回调处理缓慢，后续插件的加载也会被延后，即使它们可能没有依赖关系。"),n("br"),a._v("\n因此请尽量让 "),n("code",[a._v("onLoad()")]),a._v("，"),n("code",[a._v("onEnable()")]),a._v("，"),n("code",[a._v("onDisable()")]),a._v("快速返回。")]),a._v(" "),n("h3",{attrs:{id:"api-导出管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#api-导出管理"}},[a._v("#")]),a._v(" API 导出管理")]),a._v(" "),n("p",[a._v("允许插件将一些内部实现保护起来， 避免其他插件调用， 要启动这个特性，\n只需要创建名为 "),n("code",[a._v("export-rules.txt")]),a._v(" 的规则文件，便可以控制插件的类的公开规则。")]),a._v(" "),n("p",[a._v("如果正在使用 "),n("code",[a._v("Gradle")]),a._v(" 项目, 该规则文件一般位于 "),n("code",[a._v("src/main/resources")]),a._v(" 下")]),a._v(" "),n("p",[a._v("Example:")]),a._v(" "),n("div",{staticClass:"language-text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("\n# #开头的行全部识别为注释\n\n# exports, 允许其他插件直接使用某个类\n\n# 导出了一个internal包的一个类\n#\nexports org.example.miraiconsole.myplugin.internal.OpenInternal\n\n# 导出了整个 api 包\n#\nexports org.example.miraiconsole.myplugin.api\n\n# 保护 org.example.miraiconsole.myplugin.api2.Internal, 不允许其他插件直接使用\n#\nprotects org.example.miraiconsole.myplugin.api2.Internal\n\n# 保护整个包\n#\n# 别名: protect-package\nprotects org.example.miraiconsole.myplugin.internal\n\n# 此规则不会生效, 因为在此条规则之前,\n# org.example.miraiconsole.myplugin.internal 已经被加入到保护域中\nexports org.example.miraiconsole.myplugin.internal.NotOpenInternal\n\n\n# export-plugin, 允许其他插件使用除了已经被保护的全部类\n# 使用此规则会同时让此规则后的所有规则全部失效\n# 别名: export-all, export-system\n# export-plugin\n\n\n# 将整个插件放入保护域中\n# 除了此规则之前显式 export 的类, 其他插件将不允许直接使用被保护的插件的任何类\n# 别名: protect-all, protect-system\nprotect-plugin\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br"),n("span",{staticClass:"line-number"},[a._v("24")]),n("br"),n("span",{staticClass:"line-number"},[a._v("25")]),n("br"),n("span",{staticClass:"line-number"},[a._v("26")]),n("br"),n("span",{staticClass:"line-number"},[a._v("27")]),n("br"),n("span",{staticClass:"line-number"},[a._v("28")]),n("br"),n("span",{staticClass:"line-number"},[a._v("29")]),n("br"),n("span",{staticClass:"line-number"},[a._v("30")]),n("br"),n("span",{staticClass:"line-number"},[a._v("31")]),n("br"),n("span",{staticClass:"line-number"},[a._v("32")]),n("br"),n("span",{staticClass:"line-number"},[a._v("33")]),n("br"),n("span",{staticClass:"line-number"},[a._v("34")]),n("br"),n("span",{staticClass:"line-number"},[a._v("35")]),n("br"),n("span",{staticClass:"line-number"},[a._v("36")]),n("br"),n("span",{staticClass:"line-number"},[a._v("37")]),n("br"),n("span",{staticClass:"line-number"},[a._v("38")]),n("br")])]),n("p",[a._v("插件也可以通过 Service 来自定义导出控制")]),a._v(" "),n("p",[a._v("Example:")]),a._v(" "),n("div",{staticClass:"language-kotlin line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token annotation builtin"}},[a._v("@AutoService")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ExportManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("::")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("object")]),a._v(" MyExportManager"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" ExportManager "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("override")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fun")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("isExported")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("className"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" Boolean "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"  <== '),n("span",{pre:!0,attrs:{class:"token interpolation variable"}},[a._v("$className")]),a._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br")])]),n("h3",{attrs:{id:"插件生命周期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#插件生命周期"}},[a._v("#")]),a._v(" 插件生命周期")]),a._v(" "),n("p",[a._v("Mirai Console 不提供热加载和热卸载功能，所有插件只能在服务器启动前加载，在服务器结束时卸载。（"),n("RouterLink",{attrs:{to:"/console/QA.html#为什么不支持热加载和卸载插件"}},[a._v("为什么不支持热加载和卸载插件？")]),a._v("）")],1),a._v(" "),n("p",[a._v("插件仅可以通过如下三个回调知晓自身的加载情况。")]),a._v(" "),n("p",[a._v("较小概率情况：")]),a._v(" "),n("ul",[n("li",[a._v("如果 "),n("code",[a._v("onLoad()")]),a._v(" 被调用，"),n("code",[a._v("onEnable()")]),a._v(" 不一定会调用。因为可能在调用后续插件的 "),n("code",[a._v("onLoad()")]),a._v(" 或 "),n("code",[a._v("onEnable()")]),a._v(" 时可能会出错而导致服务器被关闭。")]),a._v(" "),n("li",[a._v("如果 "),n("code",[a._v("onLoad()")]),a._v(" 或 "),n("code",[a._v("onEnable()")]),a._v(" 调用时抛出异常，"),n("code",[a._v("onDisable()")]),a._v(" 不会被调用。（注意：这是仍处于争议状态的行为，后续可能有修改）")]),a._v(" "),n("li",[a._v("如果 "),n("code",[a._v("onEnable()")]),a._v(" 被成功调用，"),n("code",[a._v("onDisable()")]),a._v(" 一定会调用，无论其他插件是否发生错误。")])]),a._v(" "),n("h4",{attrs:{id:"加载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#加载"}},[a._v("#")]),a._v(" 加载")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPluginLoader.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPluginLoader")]),n("OutboundLink")],1),a._v(" 调用插件的 "),n("code",[a._v("onLoad()")]),a._v("，在 "),n("code",[a._v("onLoad()")]),a._v(" 正常返回后插件被认为成功加载。")]),a._v(" "),n("p",[a._v("由于 "),n("code",[a._v("onLoad()")]),a._v(" 只会被初始化一次，插件可以在该方法内进行一些"),n("em",[a._v("一次性")]),a._v("的"),n("em",[a._v("初始化")]),a._v("任务，如 "),n("RouterLink",{attrs:{to:"/console/Extensions.html#注册扩展"}},[a._v("注册扩展")]),a._v("。")],1),a._v(" "),n("p",[n("strong",[a._v("在 "),n("code",[a._v("onLoad()")]),a._v(" 时插件并未处于启用状态，此时插件不能进行监听事件，加载配置等操作。")])]),a._v(" "),n("p",[a._v("若在 Kotlin 使用 "),n("code",[a._v("object")]),a._v("，或在 Java 使用静态初始化方式定义插件主类, "),n("code",[a._v("onLoad()")]),a._v(" 与 "),n("code",[a._v("init")]),a._v(" 代码块作用几乎相同。")]),a._v(" "),n("h4",{attrs:{id:"启用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#启用"}},[a._v("#")]),a._v(" 启用")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPluginLoader.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPluginLoader")]),n("OutboundLink")],1),a._v(" 调用插件的 "),n("code",[a._v("onEnable()")]),a._v("，意为启用一个插件。")]),a._v(" "),n("p",[a._v("此时插件可以启动所有协程，事件监听，和其他任务。"),n("strong",[a._v("但这些任务都应该拥有生命周期管理，详见 "),n("a",{attrs:{href:"#%E4%BB%BB%E5%8A%A1%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E7%AE%A1%E7%90%86"}},[a._v("任务生命周期管理")]),a._v("。")])]),a._v(" "),n("h4",{attrs:{id:"禁用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#禁用"}},[a._v("#")]),a._v(" 禁用")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPluginLoader.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPluginLoader")]),n("OutboundLink")],1),a._v(" 调用插件的 "),n("code",[a._v("onDisable()")]),a._v("，意为禁用一个插件。")]),a._v(" "),n("p",[a._v("插件的任何类和对象都不会被卸载。「禁用」仅表示停止关闭所有正在进行的任务，保存所有数据，停止处理将来的数据。")]),a._v(" "),n("p",[a._v("插件应正确实现「禁用」，以为用户提供完全的控制可能。")]),a._v(" "),n("h3",{attrs:{id:"任务生命周期管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#任务生命周期管理"}},[a._v("#")]),a._v(" 任务生命周期管理")]),a._v(" "),n("h4",{attrs:{id:"协程管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#协程管理"}},[a._v("#")]),a._v(" 协程管理")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPlugin")]),n("OutboundLink")],1),a._v(" 实现 "),n("code",[a._v("CoroutineScope")]),a._v("，并由 Console 内部实现提供其 "),n("code",[a._v("coroutineContext")]),a._v("。")]),a._v(" "),n("p",[n("code",[a._v("JvmPlugin.coroutineContext")]),a._v(" 包含元素 "),n("code",[a._v("CoroutineName")]),a._v(", "),n("code",[a._v("SupervisorJob")]),a._v(", "),n("code",[a._v("CoroutineExceptionHandler")]),a._v("。"),n("br"),a._v(" "),n("strong",[a._v("所有插件启动的协程都应该受 "),n("code",[a._v("JvmPlugin")]),a._v(" 作用域的管理")])]),a._v(" "),n("p",[a._v("如要启动一个协程，正确的做法是：")]),a._v(" "),n("div",{staticClass:"language-kotlin line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// object MyPluginMain : KotlinPlugin()")]),a._v("\n\nMyPluginMain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("launch")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// job")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" \n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("h4",{attrs:{id:"java-线程管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java-线程管理"}},[a._v("#")]),a._v(" Java 线程管理")]),a._v(" "),n("p",[n("em",[a._v("TODO")]),a._v("：Mirai Console 暂未支持自动的线程管理。请手动在 "),n("code",[a._v("onDisable()")]),a._v(" 时关闭启动的线程。")]),a._v(" "),n("h3",{attrs:{id:"访问数据目录和配置目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#访问数据目录和配置目录"}},[a._v("#")]),a._v(" 访问数据目录和配置目录")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPlugin")]),n("OutboundLink")],1),a._v(" 实现接口 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/PluginFileExtensions.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("PluginFileExtensions")]),n("OutboundLink")],1),a._v("。插件可通过 "),n("code",[a._v("resolveDataFile")]),a._v("，"),n("code",[a._v("resolveConfigFile")]),a._v(" 等方法取得数据目录或配置目录下的文件。")]),a._v(" "),n("p",[a._v("可以在任何时刻使用这些方法。")]),a._v(" "),n("p",[a._v("详见 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/PluginFileExtensions.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("PluginFileExtensions")]),n("OutboundLink")],1),a._v("。")]),a._v(" "),n("h4",{attrs:{id:"物理目录路径"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#物理目录路径"}},[a._v("#")]),a._v(" 物理目录路径")]),a._v(" "),n("p",[a._v("用 "),n("code",[a._v("$root")]),a._v(" 表示 Mirai Console 运行路径，"),n("code",[a._v("$name")]),a._v(" 表示插件名，\n插件数据目录一般在 "),n("code",[a._v("$root/data/$name")]),a._v("，插件配置目录一般在 "),n("code",[a._v("$root/config/$name")]),a._v("。")]),a._v(" "),n("p",[a._v("有关数据和配置的区别可以在 "),n("RouterLink",{attrs:{to:"/console/PluginData.html"}},[a._v("PluginData")]),a._v(" 章节查看。")],1),a._v(" "),n("h3",{attrs:{id:"访问-jar-包内资源文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#访问-jar-包内资源文件"}},[a._v("#")]),a._v(" 访问 "),n("a",{attrs:{href:"https://zh.wikipedia.org/zh-cn/JAR_(%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F)",target:"_blank",rel:"noopener noreferrer"}},[a._v("JAR"),n("OutboundLink")],1),a._v(" 包内资源文件")]),a._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPlugin")]),n("OutboundLink")],1),a._v(" 实现接口 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/ResourceContainer.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("ResourceContainer")]),n("OutboundLink")],1),a._v("。插件可通过 "),n("code",[a._v("getResource")]),a._v("，"),n("code",[a._v("getResourceAsStream")]),a._v(" 等取得 "),n("a",{attrs:{href:"https://zh.wikipedia.org/zh-cn/JAR_(%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F)",target:"_blank",rel:"noopener noreferrer"}},[a._v("JAR"),n("OutboundLink")],1),a._v(" 包内资源文件。")]),a._v(" "),n("p",[a._v("可以在任何时刻使用这些方法。")]),a._v(" "),n("p",[a._v("详见 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/ResourceContainer.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("ResourceContainer")]),n("OutboundLink")],1),a._v("。")]),a._v(" "),n("h3",{attrs:{id:"读取-plugindata-或-pluginconfig"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#读取-plugindata-或-pluginconfig"}},[a._v("#")]),a._v(" 读取 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/data/PluginData.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("PluginData")]),n("OutboundLink")],1),a._v(" 或 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/data/PluginConfig.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("PluginConfig")]),n("OutboundLink")],1)]),a._v(" "),n("blockquote",[n("p",[a._v("本节基于章节 "),n("RouterLink",{attrs:{to:"/console/PluginData.html"}},[a._v("PluginData")]),a._v(" 的内容。\n在阅读本节前建议先阅读上述基础章节。")],1)]),a._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JvmPlugin.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JvmPlugin")]),n("OutboundLink")],1),a._v(" 实现接口 "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/data/PluginDataHolder.kt#L45",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("AutoSavePluginDataHolder")]),n("OutboundLink")],1),a._v("，提供:")]),a._v(" "),n("p",[a._v("Kotlin：")]),a._v(" "),n("ul",[n("li",[n("code",[a._v("public fun <T : PluginData> T.reload()")])]),a._v(" "),n("li",[n("code",[a._v("public fun <T : PluginConfig> T.reload()")])])]),a._v(" "),n("p",[a._v("Java：")]),a._v(" "),n("ul",[n("li",[n("code",[a._v("public fun reloadPluginData(PluginData)")])]),a._v(" "),n("li",[n("code",[a._v("public fun reloadPluginData(PluginConfig)")])])]),a._v(" "),n("p",[n("strong",[a._v("仅可在插件 onEnable() 时及其之后才能使用这些方法。")]),n("br"),a._v(" "),n("strong",[a._v("在插件 onDisable() 之后不能使用这些方法。")])]),a._v(" "),n("h4",{attrs:{id:"使用示例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用示例"}},[a._v("#")]),a._v(" 使用示例")]),a._v(" "),n("div",{staticClass:"language-kotlin line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-kotlin"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("object")]),a._v(" SchedulePlugin "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("KotlinPlugin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("JvmPluginDescription")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n        id "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"org.example.my-schedule-plugin"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        version "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.0.0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Schedule"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        \n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v('// author("...")')]),a._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v('// dependsOn("...")')]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ...")]),a._v("\n    \n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("override")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("fun")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("onEnable")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        MyData"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("reload")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 仅需此行，保证启动时更新数据，在之后自动存储数据。")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("object")]),a._v(" MyData "),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("AutoSavePluginData")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("val")]),a._v(" value"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" Map"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("String"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" String"),n("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("by")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("value")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br")])]),n("h3",{attrs:{id:"打包插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#打包插件"}},[a._v("#")]),a._v(" 打包插件")]),a._v(" "),n("p",[a._v("若 "),n("RouterLink",{attrs:{to:"/console/ConfiguringProjects.html#c使用-gradle-插件配置项目"}},[a._v("使用了 Mirai Console Gradle 插件")]),a._v(", 执行 Gradle 任务 "),n("code",[a._v("buildPlugin")]),a._v(" 即可打包插件 JAR. 之后可以在 "),n("code",[a._v("build/mirai/")]),a._v(" 找到 JAR 文件. 这个文件可以放入 Mirai Console "),n("code",[a._v("plugins")]),a._v(" 目录中加载.")],1),a._v(" "),n("p",[a._v("若没有使用, 请打包插件并附带资源文件和所有依赖到一个单独的 JAR.")]),a._v(" "),n("h3",{attrs:{id:"发布插件到-mirai-console-loader"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布插件到-mirai-console-loader"}},[a._v("#")]),a._v(" 发布插件到 mirai-console-loader")]),a._v(" "),n("p",[n("em",[a._v("TODO")])]),a._v(" "),n("h3",{attrs:{id:"附录-java-插件的多线程调度器-javapluginscheduler"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#附录-java-插件的多线程调度器-javapluginscheduler"}},[a._v("#")]),a._v(" 附录：Java 插件的多线程调度器 - "),n("a",{attrs:{href:"https://github.com/mamoe/mirai-console/tree/master/backend/mirai-console/src/plugin/jvm/JavaPluginScheduler.kt",target:"_blank",rel:"noopener noreferrer"}},[n("code",[a._v("JavaPluginScheduler")]),n("OutboundLink")],1)]),a._v(" "),n("p",[a._v("拥有生命周期管理的简单 Java 线程池。其中所有的任务都会在插件被关闭时自动停止。")]),a._v(" "),n("blockquote",[n("p",[a._v("下一步，"),n("RouterLink",{attrs:{to:"/console/Commands.html#mirai-console-backend---commands"}},[a._v("Commands")])],1),a._v(" "),n("p",[a._v("返回 "),n("RouterLink",{attrs:{to:"/console/#mirai-console"}},[a._v("开发文档索引")])],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);