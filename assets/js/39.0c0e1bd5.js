(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{415:function(e,r,t){"use strict";t.r(r);var n=t(49),a=Object(n.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"mirai-console-backend-plugins"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mirai-console-backend-plugins"}},[e._v("#")]),e._v(" Mirai Console Backend - Plugins")]),e._v(" "),t("p",[e._v("Mirai Console （简称 Console） 运行在 "),t("a",{attrs:{href:"https://zh.wikipedia.org/zh-cn/Java%E8%99%9A%E6%8B%9F%E6%9C%BA",target:"_blank",rel:"noopener noreferrer"}},[e._v("JVM"),t("OutboundLink")],1),e._v("，支持使用 "),t("a",{attrs:{href:"https://www.kotlincn.net/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Kotlin"),t("OutboundLink")],1),e._v(" 或 "),t("a",{attrs:{href:"https://www.java.com/zh_CN/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Java"),t("OutboundLink")],1),e._v(" 等 JVM\n语言编写的插件。")]),e._v(" "),t("p",[e._v("本章节简要介绍 Console 插件架构（与平台无关的基础架构）。")]),e._v(" "),t("h2",{attrs:{id:"通用的插件接口-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通用的插件接口-plugin"}},[e._v("#")]),e._v(" 通用的插件接口 - "),t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/https://github.com/mamoe/mirai/tree/dev/mirai-console/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Plugin")]),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("所有 Console 插件都必须直接或间接地实现 "),t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/https://github.com/mamoe/mirai/tree/dev/mirai-console/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Plugin")]),t("OutboundLink")],1),e._v(" 接口。")]),e._v(" "),t("blockquote",[t("p",[t("strong",[e._v("解释 "),t("em",[e._v("插件")])]),e._v("：只要实现了 "),t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/https://github.com/mamoe/mirai/tree/dev/mirai-console/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Plugin")]),t("OutboundLink")],1),e._v(" 接口的对象都可以叫做「Mirai Console 插件」，简称 「插件」。"),t("br"),e._v("\n为了便捷，内含 "),t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/https://github.com/mamoe/mirai/tree/dev/mirai-console/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Plugin")]),t("OutboundLink")],1),e._v(" 实现的一个 "),t("a",{attrs:{href:"https://zh.wikipedia.org/zh-cn/JAR_(%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F)",target:"_blank",rel:"noopener noreferrer"}},[e._v("JAR"),t("OutboundLink")],1),e._v(" 文件也可以被称为「插件」。")])]),e._v(" "),t("p",[e._v("基础的 "),t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/https://github.com/mamoe/mirai/tree/dev/mirai-console/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Plugin")]),t("OutboundLink")],1),e._v(" 很通用，它只拥有很少的成员：")]),e._v(" "),t("div",{staticClass:"language-kotlin line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-kotlin"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("interface")]),e._v(" Plugin "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" CommandOwner "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// CommandOwner 表示该对象可以创建指令")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("val")]),e._v(" isEnabled"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" Boolean "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 当插件已开启时返回 true")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("val")]),e._v(" loader"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" PluginLoader"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 能处理这个 Plugin 实例的 PluginLoader")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br")])]),t("p",[t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/https://github.com/mamoe/mirai/tree/dev/mirai-console/backend/mirai-console/src/plugin/Plugin.kt",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Plugin")]),t("OutboundLink")],1),e._v(" 接口拥有强扩展性，以支持 Mirai Console 统一管理使用其他编程语言编写的插件\n（详见进阶章节 "),t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/Extensions.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("扩展 - PluginLoader"),t("OutboundLink")],1),e._v("）。")]),e._v(" "),t("blockquote",[t("p",[e._v("除非你是在实现新种类插件，否则不要直接实现 "),t("code",[e._v("Plugin")]),e._v(" 接口。")])]),e._v(" "),t("h2",{attrs:{id:"插件加载器-pluginloader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插件加载器-pluginloader"}},[e._v("#")]),e._v(" 插件加载器 - "),t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/https://github.com/mamoe/mirai/tree/dev/mirai-console/backend/mirai-console/src/plugin/loader/PluginLoader.kt",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("PluginLoader")]),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("Mirai Console 支持使用多个插件加载器来加载多种类型插件。每个插件加载器都支持一种类型的插件。")]),e._v(" "),t("p",[e._v("Mirai Console 内置 "),t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/https://github.com/mamoe/mirai/tree/dev/mirai-console/backend/mirai-console/src/plugin/jvm/JvmPluginLoader.kt",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("JvmPluginLoader")]),t("OutboundLink")],1),e._v(" 以加载 JVM\n平台插件（见下文），并允许这些插件注册扩展的插件加载器（见章节 "),t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/Extensions.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("扩展"),t("OutboundLink")],1),e._v(")\n，以支持读取其他语言编写的插件并接入\nConsole 插件管理系统。")]),e._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),t("p",[e._v("Mirai Console 提供抽象的插件及其加载器接口，支持扩展。各类插件行为由其加载器确定。插件作者需要基于特定的插件平台实现，如\nConsole 内置的 "),t("RouterLink",{attrs:{to:"/console/plugin/JVMPlugin.html"}},[e._v("JVM 平台")]),e._v("。")],1),e._v(" "),t("h2",{attrs:{id:"继续阅读"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#继续阅读"}},[e._v("#")]),e._v(" 继续阅读")]),e._v(" "),t("ul",[t("li",[t("RouterLink",{attrs:{to:"/console/plugin/JVMPlugin.html"}},[e._v("JVM 平台插件详情")])],1),e._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/mamoe/mirai/tree/dev/mirai-console/Extensions.md",target:"_blank",rel:"noopener noreferrer"}},[e._v("编写插件加载器"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);r.default=a.exports}}]);